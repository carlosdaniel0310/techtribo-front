<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>Favoritos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body class="bg-light">

    <nav class="navbar navbar-expand-lg bg-light shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <span>TechTribo - Tecnologia</span>
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="informacoes.html">Sobre o Site</a></li>
                    <li class="nav-item"><a class="nav-link" href="apresentacao.html">Apresenta√ß√£o</a></li>
                    <li class="nav-item"><a class="nav-link" href="favoritos.html">Favoritos ‚≠ê</a></li>
                    <li class="nav-item"><a class="nav-link" href="cadastro_desenvolvedores.html">Cadastrar
                            Desenvolvedor</a></li>
                    <li class="nav-item"><a class="nav-link" href="index.html">In√≠cio</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container my-5">
        <h3 class="text-center fw-bold text-primary mb-4">
            Meus Desenvolvedores Favoritos
        </h3>

        <div class="row g-4" id="listaFavoritos"></div>
    </div>

    <footer class="py-4 mt-4 bg-white border-top">
        <div class="container text-center small text-muted">
            ¬© <span id="anoCorrente"></span> TechTribo ‚Ä¢ Projeto acad√™mico desenvolvido por Carlos Daniel Tempo Dutra
        </div>
    </footer>

    <script src="assets/scripts/app.js"></script>

    <script>
function carregarFavoritos() {
    const usuario = JSON.parse(localStorage.getItem("usuarioLogado"));

    if (!usuario) {
        document.getElementById("listaFavoritos").innerHTML =
            "<h4 class='text-center text-danger'>Fa√ßa login para ver seus favoritos.</h4>";
        return;
    }

    // chave correta para este usu√°rio
    const chaveFavoritos = `favoritos_${usuario.id}`;

    // carrega favoritos do usu√°rio
    const favs = JSON.parse(localStorage.getItem(chaveFavoritos)) || [];

    const container = document.getElementById("listaFavoritos");

    if (favs.length === 0) {
        container.innerHTML =
            "<h4 class='text-center text-muted'>Voc√™ ainda n√£o favoritou ningu√©m üò¢</h4>";
        return;
    }

    // monta os cards
container.innerHTML = favs.map(dev => `
    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
        <div class="card shadow-sm h-100 text-center">

            <img src="${dev.imagem_principal || dev.imagem}"
                 class="card-img-top"
                 style="height:200px; object-fit:cover; opacity:0.85;">

            <div class="card-body">
                <h5 class="fw-bold">${dev.nome}</h5>
                <h6 class="text-muted">${dev.empresa ?? ""}</h6>

                <a href="detalhe.html?id=${dev.id}"
                   class="btn btn-primary w-100 mt-2">
                    Ver Detalhes
                </a>
            </div>

        </div>
    </div>
`).join('');

}

document.addEventListener("DOMContentLoaded", () => {
  carregarFavoritos();
});
</script>

  <script>
        document.addEventListener("DOMContentLoaded", () => {
            const user = JSON.parse(localStorage.getItem("usuarioLogado"));
            const itemCadastrarDev = document.querySelector('a[href="cadastro_desenvolvedores.html"]');

            if (!user) return;

            if (!user.admin) {
                if (itemCadastrarDev) itemCadastrarDev.style.display = "none";
            }
        });
    </script>

</body>

</html>